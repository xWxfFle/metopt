# Решение задачи линейного программирования

**Ф.И.О.:** Филатов Арсений Сергеевич  
**Поток:** 1.2

## Описание

Программа для решения задачи линейного программирования с использованием симплекс-метода. Реализует полный цикл решения ЗЛП, включая приведение к каноническому виду, построение вспомогательной задачи, решение основной задачи и вывод результатов.

## Задача

### Целевая функция:
```
max Z = 3x₁ + 2x₂ + x₃ + 4x₄
```

### Ограничения:
```
2x₁ + x₂ + x₃ ≤ 12
x₂ + x₃ + x₄ = 9
x₁ + x₄ ≥ 4
x₁, x₂, x₃, x₄ ≥ 0
```

## Алгоритм решения ЗЛП

### 1. Приведение к каноническому виду
- **Ограничения типа ≤**: добавляем переменные запаса (slack variables) со знаком +
- **Ограничения типа ≥**: вычитаем переменные запаса со знаком -
- **Ограничения типа =**: оставляем без изменений

Формула преобразования для ограничения типа ≥:
```
a₁x₁ + a₂x₂ + ... + aₙxₙ ≥ b
→ a₁x₁ + a₂x₂ + ... + aₙxₙ - s = b
```

### 2. Формирование вспомогательной задачи
Для ограничений без единичной структуры добавляются **искусственные переменные**.

**Цель вспомогательной задачи**: найти начальное допустимое решение (минимизировать сумму искусственных переменных).

### 3. Решение вспомогательной задачи
- Если оптимальное значение вспомогательной задачи ≠ 0 → исходная задача **недопустима**
- Если оптимальное значение = 0 → удаляем искусственные переменные и переходим к основной задаче

### 4. Переход к основной задаче
- Удаляем искусственные переменные из базиса
- Используем найденное допустимое решение как начальную точку

### 5. Решение основной задачи (симплекс-метод)
Симплекс-метод работает по следующей схеме:

```
НАЧАЛО
  │
  ├─► Построить начальную симплекс-таблицу
  │
  ├─► Вычислить оценки небазисных переменных
  │
  ├─► Все оценки ≤ 0?
  │   ├─ ДА → РЕШЕНИЕ НАЙДЕНО
  │   └─ НЕТ → Продолжить
  │
  ├─► Выбрать входящую переменную (max положительной оценки)
  │
  ├─► Выбрать выходящую переменную (min отношение bᵢ/dᵢ)
  │
  ├─► Пересчитать симплекс-таблицу (исключение Гаусса)
  │
  └──┐
     │
◄────┘
КОНЕЦ
```

### 6. Критерии остановки
- **Оптимальность**: все оценки небазисных переменных ≤ 0 (для максимизации)
- **Недопустимость**: невозможно найти допустимое решение
- **Неограниченность**: задача не имеет конечного оптимума


### Два метода решения
Программа поддерживает два способа решения задач линейного программирования:

1. **Ручная реализация симплекс-метода** - полная реализация алгоритма без внешних библиотек
2. **Решение через scipy** - использование оптимизированной библиотеки scipy.optimize.linprog

### Чтение данных из файла
Программа автоматически читает задачу из файла `problem.txt` в формате:
```
MAXIMIZE
3*x1 + 2*x2 + 1*x3 + 4*x4

SUBJECT_TO
2*x1 + x2 + x3 <= 12
x2 + x3 + x4 = 9
x1 + x4 >= 4

VARIABLES
x1 x2 x3 x4
```

## Инструкция по развертыванию и запуску

### Шаг 1: Установка зависимостей

```bash
# Обновляем pip до последней версии
python3 -m pip install --upgrade pip

# Устанавливаем необходимые библиотеки
pip install -r requirements.txt
```

### Шаг 2: Запуск программы

1. Откройте терминал/командную строку в папке проекта
2. Выполните команду:

```bash
python3 linear_programming.py
```

### Результаты решения

После запуска программы будет получено:

1. **Канонический вид задачи** с добавленными переменными запаса
2. **Вспомогательная задача** с искусственными переменными
3. **Решение вспомогательной задачи** для нахождения допустимой точки
4. **Решение основной задачи** - оптимальная точка и значение целевой функции

### Пример вывода:

**Ручная реализация симплекс-метода:**
```
=== ИТОГОВОЕ РЕШЕНИЕ ===
Оптимальная точка:
  x1 = 6.0000
  x2 = 0.0000
  x3 = 0.0000
  x4 = 9.0000

Значение целевой функции: 54.0000
```

**Решение через scipy:**
```
=== ИТОГОВОЕ РЕШЕНИЕ ===
Оптимальная точка:
  x1 = 6.0000
  x2 = 0.0000
  x3 = 0.0000
  x4 = 9.0000

Значение целевой функции: 54.0000
```

### Верификация решения

Программа автоматически проверяет:
- Выполнение всех ограничений
- Знак переменных (≥ 0)
- Значение целевой функции

### Проверка ограничений
Подставим найденное решение в исходные ограничения:

**Ограничение 1:** 2×6 + 1×0 + 1×0 + 0×9 = 12 ≤ 12
**Ограничение 2:** 0×6 + 1×0 + 1×0 + 1×9 = 9 = 9
**Ограничение 3:** 1×6 + 0×0 + 0×0 + 1×9 = 15 ≥ 4

**Целевая функция:** 3×6 + 2×0 + 1×0 + 4×9 = 18 + 0 + 0 + 36 = 54


## Рефлективный вывод

### Что полезного было получено

1. **Углубление понимания линейного программирования**: Практическая реализация симплекс-метода помогла лучше понять его математическую основу и вычислительные аспекты

2. **Навыки работы с библиотеками Python**: Освоение работы с numpy для манипуляций с матрицами, scipy для решения оптимизационных задач

3. **Понимание этапов решения ЗЛП**: 
   - Приведение к каноническому виду
   - Работа с искусственными переменными
   - Двухэтапный симплекс-метод
   - Переход от вспомогательной к основной задаче

4. **Практика работы с Jupiter Notebook**: Эффективный инструмент для математических вычислений и визуализации результатов

5. **Навыки отладки алгоритмов**: Понимание того, как диагностировать проблемы в численных методах

### Трудности и их преодоление

1. **Сложность ручной реализации полного симплекс-метода**
   - *Проблема*: Требовалось реализовать все детали алгоритма (поиск направляющего элемента, пересчет таблиц, обработка вырожденности)
   - *Решение*: Использован баланс между собственной реализацией и проверенной библиотекой scipy.optimize.linprog для надежности решения

2. **Преобразование ограничений к каноническому виду**
   - *Проблема*: Автоматическое определение типа ограничений и корректное добавление переменных
   - *Решение*: Разработан алгоритм, который анализирует знак ограничения и добавляет соответствующие slack/surplus переменные

3. **Работа с искусственными переменными в двухэтапном методе**
   - *Проблема*: Понимание того, когда и как добавлять искусственные переменные
   - *Решение*: Реализована автоматическая проверка наличия единичной структуры в ограничениях

4. **Графическая визуализация многомерных задач**
   - *Проблема*: Задача имеет 4 переменных, визуализация затруднена
   - *Решение*: Использованы проекции на подпространства меньшей размерности

5. **Проверка результатов**
   - *Проблема*: Убедиться, что решение корректно
   - *Решение*: Добавлена автоматическая верификация всех ограничений

### Выводы

Выполнение данной лабораторной работы позволило:
- Закрепить теоретические знания по линейному программированию на практике
- Освоить современные инструменты программирования для математического моделирования
- Получить навыки решения оптимизационных задач с использованием профессиональных библиотек
- Понять практическую применимость методов математического программирования

Программа успешно решает задачу и предоставляет подробную информацию о процессе решения, что делает ее полезной как для обучения, так и для практического применения.

## Сравнение с Excel

Решение, полученное программой, было проверено с помощью надстройки "Поиск решения" в Excel. Результаты полностью совпадают:

| Метод | x1 | x2 | x3 | x4 | Z |
|-------|----|----|----|----|---|
| **Моя программа** | 6.0 | 0.0 | 0.0 | 9.0 | 54.0 |
| **Excel** | 6.0 | 0.0 | 0.0 | 9.0 | 54.0 |

Это подтверждает корректность реализации алгоритма симплекс-метода.

## Технические детали реализации

### Ключевые классы и методы:
- `LinearProgrammingSolver` - основной класс для решения ЗЛП
- `parse_problem()` - парсинг задачи из файла
- `_solve_manual_simplex()` - ручная реализация симплекс-метода
- `_two_phase_simplex()` - двухфазный метод
- `_create_simplex_tableau()` - создание симплекс-таблицы
- `_pivot()` - операция поворота
- `_extract_solution()` - извлечение решения

## Заключение

Программа успешно реализует полный цикл решения задач линейного программирования с использованием симплекс-метода. Поддержка двух методов решения (ручного и через scipy) делает ее универсальным инструментом как для образовательных целей, так и для практического применения.